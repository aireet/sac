# SAC Platform Helm Values

global:
  registry: docker-register-registry-vpc.cn-shanghai.cr.aliyuncs.com/prod/sac
  namespace: sac
  imagePullPolicy: Always

# --- API Gateway ---
apiGateway:
  replicaCount: 2
  image:
    name: api-gateway
    tag: "0.0.28"
  port: 8080
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  env:
    DB_NAME: sandbox
    K8S_NAMESPACE: sac
    DOCKER_REGISTRY: docker-register-registry-vpc.cn-shanghai.cr.aliyuncs.com
    DOCKER_IMAGE: prod/sac/cc:0.0.28

# --- WebSocket Proxy ---
wsProxy:
  replicaCount: 2
  image:
    name: ws-proxy
    tag: "0.0.28"
  port: 8081
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

# --- Frontend ---
frontend:
  replicaCount: 2
  image:
    name: frontend
    tag: "0.0.28"
  port: 80
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

# --- Database ---
database:
  host: pgm-uf60863vpy60vl6s.pg.rds.aliyuncs.com
  port: "5432"
  user: sandbox
  password: 4SOZfo6t6Oyj9A==
  name: sandbox

# --- Auth ---
auth:
  jwtSecret: sac-dev-jwt-secret-change-in-production

# --- RBAC ---
rbac:
  create: true

serviceAccount:
  create: true
  name: sac

# --- Envoy Gateway ---
envoyGateway:
  enabled: true
  # Domain name for the platform
  host: sac.echo.tech
  # Envoy Proxy data plane image (used in EnvoyProxy CRD)
  proxyImage: swr.cn-north-4.myhuaweicloud.com/ddn-k8s/docker.io/envoyproxy/envoy:distroless-v1.36.3
  # Service type: NodePort or LoadBalancer
  serviceType: NodePort

# --- Redis ---
redis:
  enabled: true
  externalURL: ""
  architecture: standalone
  auth:
    enabled: false
  master:
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 256Mi

# --- gateway-helm subchart values ---
gateway-helm:
  global:
    images:
      envoyGateway:
        image: swr.cn-north-4.myhuaweicloud.com/ddn-k8s/docker.io/envoyproxy/gateway:v1.6.3
      ratelimit:
        image: swr.cn-north-4.myhuaweicloud.com/ddn-k8s/docker.io/envoyproxy/ratelimit:3fb70258
