# SAC Platform Helm Values
# IMPORTANT: Copy this file to .local/values-production.yaml and fill in real secrets

global:
  registry: docker-register-registry-vpc.cn-shanghai.cr.aliyuncs.com/prod/sac
  namespace: sac
  imagePullPolicy: Always
  logLevel: info

# --- API Gateway ---
apiGateway:
  replicaCount: 2
  image:
    name: api-gateway
    tag: "0.0.31"
  port: 8080
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  env:
    DB_NAME: sandbox
    K8S_NAMESPACE: sac
    DOCKER_REGISTRY: docker-register-registry-vpc.cn-shanghai.cr.aliyuncs.com
    DOCKER_IMAGE: prod/sac/cc:0.0.31

# --- WebSocket Proxy ---
wsProxy:
  replicaCount: 2
  image:
    name: ws-proxy
    tag: "0.0.31"
  port: 8081
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

# --- Frontend ---
frontend:
  replicaCount: 2
  image:
    name: frontend
    tag: "0.0.31"
  port: 80
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

# --- Database ---
# IMPORTANT: Use environment variables or external secrets for production
database:
  host: YOUR_RDS_HOST
  port: "5432"
  user: YOUR_DB_USER
  password: YOUR_DB_PASSWORD
  name: YOUR_DB_NAME

# --- Auth ---
# IMPORTANT: Change this in production
auth:
  jwtSecret: CHANGE_THIS_SECRET_IN_PRODUCTION

# --- RBAC ---
rbac:
  create: true

serviceAccount:
  create: true
  name: sac

# --- Envoy Gateway ---
envoyGateway:
  enabled: true
  # Domain name for the platform
  host: sac.example.com
  # Envoy Proxy data plane image (used in EnvoyProxy CRD)
  proxyImage: swr.cn-north-4.myhuaweicloud.com/ddn-k8s/docker.io/envoyproxy/envoy:distroless-v1.36.3
  # Service type: NodePort or LoadBalancer
  serviceType: NodePort

# --- Redis ---
redis:
  enabled: true
  externalURL: ""
  architecture: standalone
  auth:
    enabled: false
  master:
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 256Mi

# --- Maintenance CronJob ---
maintenance:
  enabled: true
  schedule: "*/10 * * * *"

# --- gateway-helm subchart values ---
gateway-helm:
  global:
    images:
      envoyGateway:
        image: swr.cn-north-4.myhuaweicloud.com/ddn-k8s/docker.io/envoyproxy/gateway:v1.6.3
      ratelimit:
        image: swr.cn-north-4.myhuaweicloud.com/ddn-k8s/docker.io/envoyproxy/ratelimit:3fb70258
